<div class="flex w-full justify-center max-w-screen-xl mx-auto h-full pt-16">
  <div
    class="w-4/5 min-h-[900px] py-2 bg-slate-600 flex-col justify-start gap-2 flex">
    <div *ngIf="boxDetail">
      <div class="flex justify-between py-6">
        <!-- <div>1</div> -->
        <div class="flex-col space-y-6 pl-3 gap-6">
          <img
            (click)="goBack()"
            src="/assets/svg/west.svg"
            class="w-[70px] h-[30px] cursor-pointer" />
          <button
            [disabled]="userBoxIsPlayed"
            (click)="startAnimationButtonClicked()"
            class="h-[36px] px-4 !bg-[#54B164] rounded-[50px] text-center text-button !text-white font-medium uppercase leading-9 tracking-widest">
            <i class="fa-solid fa-gamepad"></i>
            {{ 'panier.Jouer' | translate }}
            <i
              *ngIf="gameStatus === 'RUNNING'"
              class="fa-solid fa-spinner fa-spin-pulse"></i>
          </button>
        </div>
        <!-- <div>2</div> -->
        <div class="grow flex-col justify-start items-center gap-[10px] flex">
          <div class="col-span-1 my-wid" *ngIf="cardBoxItem">
            <div class="flex flex-col">
              <div
                class="text-[12px] normal-case leading-5 tracking-[0.4px] !text-white !w-full px-1 bg-[#33B063]">
                {{ cardBoxItem.topTitle }}
              </div>
              <div
                class="flex flex-col px-2 p-1 gap-1 rounded-[8px] w-[209px] !bg-gradient-to-b from-[#2f435e] from-[41.21%] via-[#4b5e65] via-[83.79%] to-[#201b22] to-[100%]">
                <h4
                  class="text-center uppercase font-bold flex justify-center tracking-[2px] leading-4 pt-2">
                  {{ cardBoxItem.title }}
                </h4>
                <p class="text-caption text-center normal-case">
                  {{ cardBoxItem.subTitle }}
                </p>
                <div class="flex justify-center rounded">
                  <img
                    *ngIf="
                      !(gameStatus === 'RUNNING' || gameStatus === 'FINISHED')
                    "
                    [src]="getBoxImageURL(cardBoxItem.imageUrl ?? '')"
                    class="w-[183px] h-[153px] rounded" />
                  <img
                    *ngIf="
                      gameStatus === 'RUNNING' || gameStatus === 'FINISHED'
                    "
                    [src]="getBoxImageURL(selectedArticleImageUrl)"
                    class="w-[183px] h-[153px] rounded" />
                </div>
                <div
                  class="w-full flex justify-between flex-shrink-0 items-center px-2">
                  <div
                    class="text-caption text-white flex px-1 rounded-full !bg-[#D2339B] items-center h-5">
                    {{ cardBoxItem.textLeft }}
                  </div>
                  <div class="text-h5 text-white">
                    {{ cardBoxItem.textRight }}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- <div>3</div> -->
        <div class="pr-4 flex-col justify-start items-end gap-6 flex">
          <button
            (click)="showModalLivre = true"
            [disabled]="!userBoxIsPlayed"
            class="h-[36px] px-4 !bg-sky-600 rounded-[50px] text-center text-button !text-white font-medium uppercase leading-9 tracking-widest">
            {{ 'panier.A_livrer' | translate }}
            <i
              *ngIf="gameStatus === 'RUNNING'"
              class="fa-solid fa-spinner fa-spin-pulse"></i>
          </button>
          <button
            (click)="showModalVendre = true"
            [disabled]="!userBoxIsPlayed"
            class="h-[36px] px-4 !bg-sky-600 rounded-[50px] text-center text-button !text-white font-medium uppercase leading-9 tracking-widest">
            {{ 'panier.Vendre' | translate }}
            <i
              *ngIf="gameStatus === 'RUNNING'"
              class="fa-solid fa-spinner fa-spin-pulse"></i>
          </button>
          <button
            (click)="goToPanier()"
            [disabled]="!userBoxIsPlayed"
            class="h-[36px] px-4 !bg-sky-600 rounded-[50px] text-center text-button !text-white font-medium uppercase leading-9 tracking-widest">
            {{ 'panier.go_to_cart' | translate }}
            <i
              *ngIf="gameStatus === 'RUNNING'"
              class="fa-solid fa-spinner fa-spin-pulse"></i>
          </button>
        </div>
      </div>
      <hr class="mx-auto w-[98%] pb-2" />
      <div
        [ngStyle]="getGridLayoutStyle(boxArticle.length)"
        class="w-full grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-8 xl:grid-cols-8 gap-7 p-3"
        id="style-4">
        <div
          [id]="cardGameItem.id"
          *ngFor="let cardGameItem of getFormattedGameItems(); let i = index">
          <app-card-game
            [addBorder]="selectedArticleId === cardGameItem.id"
            class="flex justify-center"
            [cardGameItem]="cardGameItem"></app-card-game>
        </div>
      </div>
    </div>
  </div>
  <div class="overflow-auto w-1/5 max-h-[1040px] pl-1" id="style-4">
    <app-best-sellers [boxList]="getBoxListRigt()" [cardBoxItem]="cardBoxItem">
    </app-best-sellers>
  </div>
</div>

<div
  *ngIf="showModalLivre"
  (click)="showModalLivre = false"
  class="flex flex-col w-1/3 ml-auto mr-auto modal-bg justify-center items-center">
  <div
    class="py-12 modal__overlay dark:bg-gray-900 transition duration-150 ease-in-out z-10 absolute top-0 right-0 bottom-0 left-0"
    id="modal">
    <div
      role="modal"
      class="mx-auto container flex justify-center w-full md:w-2/3 max-w-lg pt-[180px]">
      <div
        class="!bg-[#2d486e] rounded-xl shadow fixed overflow-y-auto sm:h-auto w-10/12 md:w-8/12 lg:w-1/2 2xl:w-2/5">
        <div
          class="!bg-[#2d486e] rounded-tl-md rounded-tr-md px-4 md:px-8 md:py-4 pt-3 flex items-center justify-center">
          <p class="text-h6 text-center">
            <!-- <span> Êtes-vous sûr d'avoir livré cet article ?</span><br />
            Veuillez accepter si oui. -->
            {{ 'popgameLivre' | translate }}
          </p>
        </div>
        <div class="px-4 md:px-10 md:pt-12 md:pb-4 pb-7">
          <div class="flex items-center justify-between">
            <div>
              <button
                (click)="showModalLivre = false"
                class="text-h6 font-semibold focus:outline-none transition duration-150 ease-in-out hover:bg-[#034EA2] bg-[#034EA2] rounded text-white px-4 sm:px-8 py-2 text-xs sm:text-sm">
                <!-- Annuler -->{{ 'detail.Annuler' | translate }}
              </button>
            </div>
            <div>
              <button
                (click)="getPostLivre()"
                class="text-h6 font-semibold focus:outline-none ml-3 !bg-[#54B164] dark:bg-gray-700 dark:border-gray-700 dark:hover:bg-gray-600 transition duration-150 text-gray-600 dark:text-gray-400 ease-in-out hover:border-gray-400 hover:bg-gray-300 border rounded px-8 py-2 text-sm">
                <!-- Accepter -->{{ 'detail.Accepter' | translate }}
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div
  *ngIf="showModalVendre"
  (click)="showModalVendre = false"
  class="flex flex-col w-1/3 ml-auto mr-auto modal-bg justify-center items-center">
  <div
    class="py-12 modal__overlay dark:bg-gray-900 transition duration-150 ease-in-out z-10 absolute top-0 right-0 bottom-0 left-0"
    id="modal">
    <div
      role="modal"
      class="mx-auto container flex justify-center w-full md:w-2/3 max-w-lg pt-[180px]">
      <div
        class="!bg-[#2d486e] rounded-xl shadow fixed overflow-y-auto sm:h-auto w-10/12 md:w-8/12 lg:w-1/2 2xl:w-2/5">
        <div
          class="!bg-[#2d486e] rounded-tl-md rounded-tr-md px-4 md:px-8 md:py-4 pt-3 flex items-center justify-center">
          {{ 'popVendreGame' | translate }}{{ shoppingPriceArticle }}
        </div>
        <div class="px-4 md:px-10 md:pt-12 md:pb-4 pb-7">
          <div class="flex items-center justify-between">
            <div>
              <button
                (click)="showModalVendre = false"
                class="text-h6 font-semibold focus:outline-none transition duration-150 ease-in-out hover:bg-[#034EA2] bg-[#034EA2] rounded text-white px-4 sm:px-8 py-2 text-xs sm:text-sm">
                <!-- Annuler -->{{ 'detail.Annuler' | translate }}
              </button>
            </div>
            <div>
              <button
                (click)="getPostVendre()"
                class="text-h6 font-semibold focus:outline-none ml-3 !bg-[#54B164] dark:bg-gray-700 dark:border-gray-700 dark:hover:bg-gray-600 transition duration-150 text-gray-600 dark:text-gray-400 ease-in-out hover:border-gray-400 hover:bg-gray-300 border rounded px-8 py-2 text-sm">
                <!-- Accepter -->{{ 'detail.Accepter' | translate }}
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
